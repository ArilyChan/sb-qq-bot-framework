"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const koishi_utils_1 = require("koishi-utils");
function apply(ctx, respondents = []) {
    if (!respondents.length)
        return;
    ctx.middleware(({ message, $send }, next) => {
        message = koishi_utils_1.simplify(message);
        for (const { match, reply } of respondents) {
            const capture = typeof match === 'string' ? message === match && [message] : message.match(match);
            if (capture)
                return $send(typeof reply === 'string' ? reply : reply(...capture));
        }
        return next();
    });
}
exports.default = apply;
