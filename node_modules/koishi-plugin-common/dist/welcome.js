"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const defaultMessage = (meta) => `欢迎新大佬 [CQ:at,qq=${meta.userId}]！`;
function apply(ctx, message = defaultMessage) {
    ctx.receiver.on('group-increase', async (meta) => {
        if (meta.userId === ctx.app.selfId)
            return;
        if (ctx.database) {
            const group = await ctx.database.getGroup(meta.groupId, 0, ['assignee']);
            if (group.assignee !== ctx.app.selfId)
                return;
        }
        await ctx.sender.sendGroupMsg(meta.groupId, typeof message === 'string' ? message : await message(meta));
    });
}
exports.default = apply;
